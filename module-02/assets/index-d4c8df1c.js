import{j as n,L as p,r as i,u as v,O as D}from"./index-9962eaf4.js";function y(e){let t=String(e.pokemonsCard.id);return e.pokemonsCard.id<100&&(t=e.pokemonsCard.id<10?"#00"+e.pokemonsCard.id:"#0"+e.pokemonsCard.id),n.jsx(p,{to:`${e.pokemonsCard.name}`,children:n.jsxs("div",{className:"cardWrapper",children:[n.jsx("img",{src:e.pokemonsCard.img,alt:"pokemon-img",className:"pokemonImg"}),n.jsx("p",{className:"pokemonName",children:e.pokemonsCard.name}),n.jsx("p",{className:"pokemonNumber",children:t}),n.jsx("div",{className:"pokemonInfo",children:n.jsx("p",{className:"pokemonType",children:e.pokemonsCard.types})})]})})}function I(e){const t=Math.floor(e.pokemosCount/Number(e.pokemosPerPage));function o(){let a=e.currentPage;a++,a=a>t?t:a,e.setCurrentPage(a)}function l(){let a=e.currentPage;a--,a=a<1?1:a,e.setCurrentPage(a)}return n.jsxs("div",{className:"paginationContainer",children:[n.jsx("div",{className:"currentPage",children:e.currentPage}),n.jsxs("div",{className:"crossPiece",children:[n.jsx(p,{to:`/catalog/${e.currentPage<2?1:e.currentPage-1}`,children:n.jsx("button",{className:"paginationBtn prevBtn",onClick:l,children:"◂"})}),n.jsxs("div",{className:"verticalAxis",children:[n.jsx("div",{className:"verticalBlock",children:" ▴ "}),n.jsx("div",{className:"verticalBlock",children:" ● "}),n.jsx("div",{className:"verticalBlock",children:" ▾ "})]}),n.jsx(p,{to:`/catalog/${e.currentPage>t-1?t:e.currentPage+1}`,children:n.jsx("button",{className:"paginationBtn nextBtn",onClick:o,children:"▸"})})]})]})}const S="https://pokeapi.co/api/v2/pokemon/";function $(e){const[t,o]=i.useState(1292),[l,a]=i.useState({data:[]});async function m(){const s=`${S}?limit=${e.elementsPerPage}&offset=${(e.currentPage-1)*Number(e.elementsPerPage)}`,r=[],c=await(await fetch(s)).json();new Promise(h=>{o(c.count),c.results.forEach(async(x,j,f)=>{const g=await(await fetch(x.url)).json(),C=g.types.map(N=>N.type.name).join("/"),P={id:g.id,img:g.sprites.front_default,name:g.name,types:C};r.push(P),j===f.length-1&&h(r)})}).then(h=>{a({data:h})})}const u=l.data.sort((s,r)=>s.id>r.id?1:-1);return i.useEffect(()=>{m()},[e.elementsPerPage,e.currentPage]),i.useEffect(()=>{var s;e.pokemonsData&&(((s=e.pokemonsData)==null?void 0:s.length)>0?a({data:e.pokemonsData}):m())},[e.pokemonsData]),n.jsxs("div",{children:[n.jsx("div",{className:"catalogWrapper",children:u.map(s=>n.jsx(y,{pokemonsCard:s},s.id))}),n.jsx(I,{pokemosCount:t,currentPage:e.currentPage,pokemosPerPage:e.elementsPerPage,setCurrentPage:e.setCurrentPage})]})}function w(e){const t=localStorage.getItem("search"),[o,l]=i.useState(t||"");function a(s){l(s.target.value)}function m(){localStorage.setItem("search",o),u()}async function u(){const s=`https://pokeapi.co/api/v2/pokemon/${o}`;try{if(o==="")e.onPokemoDataChange([]);else{const d=await(await fetch(s)).json(),c=d.types.map(h=>h.type.name).join("/"),k=[{id:d.id,img:d.sprites.front_default,name:d.name,types:c}];e.onPokemoDataChange(k)}}catch{alert("Pokemon not found (ฅ• . •ฅ)")}}return n.jsxs("div",{className:"searcWrapper",children:[n.jsx("button",{className:"searchButton",onClick:m}),n.jsx("div",{className:"SearchWrapper",children:n.jsx("input",{type:"text",className:"SearchInput",onChange:a,value:o})})]})}function E(e){return n.jsxs("header",{children:[n.jsx("div",{className:"styledFirstHeaderRow",children:n.jsx("img",{src:"/src/assets/pokedex.png",alt:"pokedex-logo",className:"pokedexLogo"})}),n.jsx("div",{className:"headerContainer",children:n.jsx(w,{onPokemoDataChange:e.onPokemoDataChange})})]})}function b(e){function t(o){e.onElementsPerPage(o.target.value),e.setCurrentPage(1)}return n.jsxs("div",{className:"dropDownContainer",children:[n.jsx("p",{children:"Cards per page: "}),n.jsxs("select",{name:"elementsPerPage",className:"dropDown",onChange:t,children:[n.jsx("option",{value:"30",children:"30"}),n.jsx("option",{value:"60",children:"60"}),n.jsx("option",{value:"90",children:"90"})]})]})}function U(){const e=v(),t=e!=null&&e.pageId?Number(e==null?void 0:e.pageId):1,[o,l]=i.useState([]),[a,m]=i.useState(t),[u,s]=i.useState("30");function r(c){l(c)}function d(c){s(c)}return n.jsxs(n.Fragment,{children:[n.jsx(E,{onPokemoDataChange:r}),n.jsxs("div",{className:"pageContainer",children:[n.jsx(b,{onElementsPerPage:d,setCurrentPage:m}),n.jsx($,{elementsPerPage:u,setCurrentPage:m,currentPage:a,pokemonsData:o}),n.jsx(D,{})]})]})}export{U as default};
